
<!DOCTYPE html>
<html>
<head>
    <title>Limpiar Datos Locales</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        button { 
            background: #ff4444; 
            color: white; 
            border: none; 
            padding: 15px 30px; 
            font-size: 16px; 
            cursor: pointer; 
            border-radius: 5px;
            margin: 10px 0;
        }
        button:hover { background: #cc3333; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üßπ Limpiar Datos Locales</h1>
        <p>Este script limpiar√° todos los datos locales de la aplicaci√≥n para que inicie desde cero.</p>
        
        <button onclick="clearAllData()">üóëÔ∏è Limpiar Todos los Datos</button>
        
        <div id="result"></div>
        
        <h3>Datos que se limpiar√°n:</h3>
        <ul>
            <li>Sabores</li>
            <li>Rellenos</li>
            <li>Pedidos</li>
            <li>Configuraci√≥n</li>
            <li>Usuarios</li>
            <li>Notificaciones</li>
        </ul>
    </div>

    <script>
        function clearAllData() {
            const result = document.getElementById('result');
            result.innerHTML = '<p>üßπ Limpiando datos...</p>';
            
            try {
                // Lista de todas las claves de localStorage
                const keysToRemove = [
                    'sabores',
                    'rellenos', 
                    'pedidos',
                    'settings',
                    'users',
                    'notifications',
                    'pending_sync_queue',
                    'last_sync_timestamp',
                    'user_session',
                    'app_settings'
                ];
                
                let removedKeys = [];
                
                // Limpiar claves espec√≠ficas
                keysToRemove.forEach(key => {
                    if (localStorage.getItem(key)) {
                        localStorage.removeItem(key);
                        removedKeys.push(key);
                    }
                });
                
                // Limpiar todas las claves que empiecen con 'pasteleria_' o 'app_'
                const allKeys = Object.keys(localStorage);
                allKeys.forEach(key => {
                    if (key.startsWith('pasteleria_') || key.startsWith('app_')) {
                        localStorage.removeItem(key);
                        if (!removedKeys.includes(key)) {
                            removedKeys.push(key);
                        }
                    }
                });
                
                result.innerHTML = `
                    <div class="success">
                        ‚úÖ ¬°Datos limpiados exitosamente!<br>
                        <strong>Claves eliminadas:</strong><br>
                        <pre>${removedKeys.length > 0 ? removedKeys.join('\n') : 'No se encontraron datos para limpiar'}</pre>
                        <br>
                        üì± La aplicaci√≥n ahora iniciar√° con datos completamente limpios.
                    </div>
                `;
                
                console.log('üßπ Datos locales limpiados:', removedKeys);
                
            } catch (error) {
                result.innerHTML = `
                    <div class="error">
                        ‚ùå Error limpiando datos: ${error.message}
                    </div>
                `;
                console.error('Error limpiando datos:', error);
            }
        }
        
        // Mostrar estado actual
        window.onload = function() {
            const allKeys = Object.keys(localStorage);
            const appKeys = allKeys.filter(key => 
                key.startsWith('pasteleria_') || 
                key.startsWith('app_') ||
                ['sabores', 'rellenos', 'pedidos', 'settings', 'users', 'notifications'].includes(key)
            );
            
            if (appKeys.length > 0) {
                document.getElementById('result').innerHTML = `
                    <p><strong>Datos encontrados:</strong></p>
                    <pre>${appKeys.join('\n')}</pre>
                `;
            }
        };
    </script>
</body>
</html>
